!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.split_paragraph=e())}(self,(()=>(()=>{var t={"ckeditor5/src/core.js":(t,e,r)=>{t.exports=r("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(t,e,r)=>{t.exports=r("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":t=>{"use strict";t.exports=CKEditor5.dll}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o={};return(()=>{"use strict";r.d(o,{default:()=>a});var t=r("ckeditor5/src/core.js"),e=r("ckeditor5/src/ui.js");class s extends t.Command{execute(){const{model:t,sourceElement:e}=this.editor,[r,o]=t.document.selection.getFirstPosition().path,s=(new DOMParser).parseFromString(this.editor.getData(),"text/html").body.children,i=[],a=[],n=t=>t.reduce(((t,e)=>t+e.outerHTML),"");let l=0;Array.from(s).forEach((t=>{if(l<r&&i.push(t),l===r){const[e,r]=this.splitNode(t,o);e&&i.push(e),r&&a.push(r)}l>r&&a.push(t),l+=1}));const d=n(i),p=n(a);window._splitParagraph={data:{first:d,second:p},selector:e.dataset.drupalSelector},e.closest(".paragraph-type--text").nextElementSibling.querySelector(".paragraphs-features__add-in-between__button").click()}refresh(){this.isEnabled=!0}static splitNode(t,e){let r=0;const o=t=>{if(t.nodeType===Node.TEXT_NODE){if(t.data.length>e-r){const o=t.data.substring(0,e-r),s=t.data.substring(e-r);return[o?document.createTextNode(o):null,s?document.createTextNode(s):null]}return r+=t.data.length,[t,null]}const s=[],i=[];if(t.childNodes.forEach((t=>{if(0===i.length){const[e,r]=o(t);e&&s.push(e),r&&i.push(r)}else i.push(t)})),0===i.length)return[t,null];const a=t.cloneNode(),n=t.cloneNode();return s.forEach((t=>{a.appendChild(t)})),i.forEach((t=>{n.appendChild(t)})),[a.childNodes.length>0?a:null,n.childNodes.length>0?n:null]};return o(t)}}class i extends t.Plugin{init(){null!=this.editor.sourceElement.closest(".paragraph-type--text")&&(this.editor.ui.componentFactory.add("splitParagraph",(t=>{const r=this.editor.commands.get("splitParagraph"),o=new e.ButtonView(t);return o.set({label:this.editor.t("Split Paragraph"),icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n\x3c!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --\x3e\n<svg width="800px" height="800px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\r\n\t<path d="M10.646 13.146l0.707 0.707-2.853 2.854-2.854-2.854 0.707-0.707 1.647 1.647v-3.772h1v3.772l1.646-1.647zM8 2.207v3.772h1v-3.772l1.646 1.646 0.707-0.707-2.853-2.853-2.854 2.853 0.707 0.707 1.647-1.646zM0 8v1h17v-1h-17z" fill="#000000" />\r\n</svg>',tooltip:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(o,"execute",(()=>this.editor.execute("splitParagraph"))),o})),this.editor.commands.add("splitParagraph",new s(this.editor)))}afterInit(){if(window._splitParagraph){if("string"==typeof window._splitParagraph.data.second){const t=this.editor.sourceElement.closest(".paragraph-type--text")?.previousElementSibling?.previousElementSibling;t&&t.querySelector(`[data-drupal-selector="${window._splitParagraph.selector}"]`)&&setTimeout((()=>{this.editor.setData(window._splitParagraph.data.second),window._splitParagraph.data.second=null}),0)}"string"==typeof window._splitParagraph.data.first&&this.editor.sourceElement.dataset.drupalSelector===window._splitParagraph.selector&&setTimeout((()=>{this.editor.setData(window._splitParagraph.data.first),window._splitParagraph.data.first=null}),0)}}}const a={SplitParagraph:i}})(),o.default})()));